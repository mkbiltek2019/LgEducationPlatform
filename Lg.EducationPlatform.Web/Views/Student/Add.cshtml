@model Lg.EducationPlatform.ViewModel.StudentViewModel

@section headScript{
    <script type="text/javascript" src="/Content/js/plugins/jquery.validate.min.js"></script>
    <script type="text/javascript" src="/Content/js/plugins/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="~/Content/js/custom/calendar.zh-cn.js"></script>
    <script type="text/javascript">
        jQuery.noConflict();
        jQuery(function () {
            jQuery('input:checkbox, input:radio, select.uniformselect, input:file').uniform();

            var id = jQuery('#Id').val();
            id > 0 ? jQuery('#student,#stu_info').addClass('current') : jQuery('#student,#stu_add').addClass('current');
            jQuery('body').addClass('withvernav');
            jQuery('#Birthday').datepicker({
                dateFormat: 'yy-mm-dd',
                changeMonth: true,
                changeYear: true
            });

            jQuery("#addstudentform").validate({
                rules: {
                    SurName: {
                        required: true,
                        maxlength: 5
                    },
                    Birthday: {
                        required: true
                    },
                    Nationality: {
                        required: true,
                        maxlength: 8
                    },
                    Phone: {
                        required: true,
                        minlength: 11,
                        maxlength: 11,
                        isPhoneNum: true
                    },
                    Period: "required",
                    Address: {
                        required: true,
                        maxlength: 100
                    },
                    MajorName: {
                        required: true,
                        maxlength: 20
                    }
                },
                messages: {
                    SurName: {
                        required: "学生姓名不能为空",
                        maxlength: "您输入的姓名太长"
                    },
                    Birthday: {
                        required: "生日不能为空"
                    },
                    Nationality: {
                        required: "请输入民族",
                        maxlength: "您输入的民族太长"
                    },
                    Phone: {
                        required: "请输入一个正确的手机号码",
                        maxlength: "请填写11位的手机号",
                        minlength: "请填写11位的手机号",
                        isPhoneNum: "请填写正确的手机号码"
                    },
                    Period: "请输入届别",
                    Address: {
                        required: "地址不能为空",
                        maxlength: "您输入的地址太长了"
                    },
                    MajorName: {
                        required: "专业名称不能为空",
                        maxlength: "专业名称太长了"
                    }
                },
                submitHandler: function (form) {
                    jQuery.post("/Student/Add", jQuery(form).serialize(), function (data) {
                        if (data.Status == "1") {
                            layer.confirm(data.Message, {
                                btn: ['学生信息', '继续操作']
                            }, function () {
                                window.location.href = "/Student/Index";
                            }, function () {
                                window.location.href = '/Student/Add/' + id;
                            });
                        } else {
                            layer.alert(data.Message);
                        }
                    });
                }
            });
        });

        //自定义手机号验证
        jQuery.validator.addMethod("isPhoneNum", function (value, element) {
            var length = value.length;
            var mobile = /^1[3|5|8]{1}[0-9]{9}$/;
            return this.optional(element) || (length == 11 && mobile.test(value));
        }, "请正确填写您的手机号码");
    </script>
}

@{ Html.RenderPartial("~/Views/Shared/_StudentMenu.cshtml"); }

<div class="centercontent">
    <ul class="breadcrumbs">
        <li><a>首页</a></li>
        <li><a href="">学生管理</a></li>
        @if (Model.Id > 0) {
            <li>编辑学生</li>
        } else {
            <li>添加学生</li>
        }
    </ul>
    <div class="contentwrapper">
        <form id="addstudentform" class="stdform" method="post" action="">
            <div class="contenttitle2">
                <h3>基本信息</h3>
            </div>
            <p>
                <label>姓名</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.SurName, new { @class = "smallinput" })
                </span>
            </p>
            <p>
                <label>性别</label>
                <span class="field">
                    @Html.RadioButtonFor(m => m.Sex, 1) 男 &nbsp; &nbsp;
                    @Html.RadioButtonFor(m => m.Sex, 0) 女
                </span>
            </p>
            <p>
                <label>生日</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.Birthday, new { @class = "width100" })
                </span>
            </p>
            <p>
                <label>民族</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.Nationality, new { @class = "smallinput" })
                </span>
            </p>
            <p>
                <label>手机</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.Phone, new { @class = "smallinput" })
                </span>
            </p>
            <p>
                <label>届别</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.Period, new { @class = "smallinput" })
                </span>
            </p>

            <p>
                <label>政治面貌</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.PoliticalStatus, new { @class = "mediuminput" })
                </span>
            </p>
            <p>
                <label>通讯地址</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.Address, new { @class = "longinput" })
                </span>
            </p>
            <div class="contenttitle2">
                <h3>报考信息</h3>
            </div>
            <p>
                <label>文化层次</label>
                <span class="field">
                    @Html.DropDownListFor(m => m.EducationalLevel, ViewBag.EduLevelItemList as List<SelectListItem>, new { @class = "uniformselect" })
                </span>
            </p>

            <p>
                <label>报考层次</label>
                <span class="field">
                    @Html.DropDownListFor(m => m.ExaminationLevel, ViewBag.ExamLevelItemList as List<SelectListItem>, new { @class = "uniformselect" })
                </span>
            </p>

            <p>
                <label>专业</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.MajorName, new { @class = "smallinput" })
                </span>
            </p>
            <p>
                <label>免试条件</label>
                <span class="field">
                    @Html.TextBoxFor(m => m.TestFreeCondition, new { @class = "longinput" })
                </span>
            </p>
            <p>
                <label>备注</label>
                <span class="field">
                    @Html.TextAreaFor(m => m.Remark, new { @cols = "80", @rows = "5", @class = "longinput" })
                </span>
            </p>
            <div class="contenttitle2">
                <h3>其他信息</h3>
            </div>
            <p>
                <label>2寸蓝底免冠照</label>
                <span class="field">
                    <div class="uploader" id="uniform-undefined">
                        <input name="filename" size="19" style="opacity: 0;" type="file">
                        <span class="filename" style="-moz-user-select: none;">未选择任何文件</span>
                        <span class="action" style="-moz-user-select: none;">选择文件</span>
                    </div>
                </span>
            </p>
            <p>
                <label>身份证正面</label>
                <span class="field">
                    <div class="uploader" id="uniform-undefined">
                        <input name="filename" size="19" style="opacity: 0;" type="file">
                        <span class="filename" style="-moz-user-select: none;">未选择任何文件</span>
                        <span class="action" style="-moz-user-select: none;">选择文件</span>
                    </div>
                </span>
            </p>
            <p>
                <label>身份证反面</label>
                <span class="field">
                    <div class="uploader" id="uniform-undefined">
                        <input name="filename" size="19" style="opacity: 0;" type="file">
                        <span class="filename" style="-moz-user-select: none;">未选择任何文件</span>
                        <span class="action" style="-moz-user-select: none;">选择文件</span>
                    </div>
                </span>
            </p>
            <br />

            <p class="stdformbutton">
                @Html.HiddenFor(m => m.Id)
                <button class="submit radius2">提交学生资料</button>
            </p>
        </form>
    </div>
</div>